"use strict";var E=Object.create;var c=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var _=(e,t)=>{for(var s in t)c(e,s,{get:t[s],enumerable:!0})},b=(e,t,s,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of y(t))!g.call(e,r)&&r!==s&&c(e,r,{get:()=>t[r],enumerable:!(a=S(t,r))||a.enumerable});return e};var k=(e,t,s)=>(s=e!=null?E(m(e)):{},b(t||!e||!e.__esModule?c(s,"default",{value:e,enumerable:!0}):s,e)),v=e=>b(c({},"__esModule",{value:!0}),e);var w={};_(w,{LanyardError:()=>u,useLanyard:()=>h,useLanyardWs:()=>T});module.exports=v(w);var d=require("react");function T(e,t){let[s,a]=(0,d.useState)();return(0,d.useEffect)(()=>{if(!("WebSocket"in window||"MozWebSocket"in window))throw new Error("WebSocket connections not supported in this browser.");let r;typeof e=="object"?r={subscribe_to_ids:e}:r={subscribe_to_id:e};let o,n;function p(){o&&clearInterval(o),n=new WebSocket(`wss://${t??"api.lanyard.rest"}/socket`),n.addEventListener("open",()=>{console.log("Lanyard: Socket connection opened")}),n.addEventListener("close",p),n.addEventListener("message",f=>{let i=JSON.parse(f.data);switch(i.op){case 1:o=setInterval(()=>{n.readyState===n.OPEN&&n.send(JSON.stringify({op:3}))},i.d?.heartbeat_interval),n.readyState===n.OPEN&&n.send(JSON.stringify({op:2,d:r}));break;case 0:switch(i.t){case"INIT_STATE":case"PRESENCE_UPDATE":i.d&&a(i.d);break;default:break}break;default:break}})}return p(),()=>{clearInterval(o),n.removeEventListener("close",p),n.close()}},[]),s}var l=k(require("swr")),u=class extends Error{constructor(s,a,r){super(r);this.request=s;this.response=a;this.code=this.response.status}};function h(e,t,s){return(0,l.default)(`lanyard:${e}`,async()=>{let a=new Request(`https://${t??"api.lanyard.rest"}/v1/users/${e}`),r=await fetch(a),o=await r.json();if("error"in o)throw new u(a,r,o.error.message);return o.data},s)}0&&(module.exports={LanyardError,useLanyard,useLanyardWs});
//# sourceMappingURL=index.js.map